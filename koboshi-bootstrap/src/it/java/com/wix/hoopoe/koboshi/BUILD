package(default_visibility = ["//visibility:public"])

load(
    "@io_bazel_rules_scala//scala:scala.bzl",
    "scala_binary",
    "scala_library",
    "scala_test",
    "scala_macro_library",
    "scala_specs2_junit_test",
)

scala_specs2_junit_test(
    name = "koboshi",
    srcs = glob(["*.java"]) + glob(["*.scala"]),
    data = ["//koboshi-bootstrap:coordinates"],
    javacopts = [
        "-g",
        "-deprecation",
        "-XepDisableAllChecks",
    ],
    jvm_flags = ["-Dexisting.manifest=$(location //koboshi-bootstrap:coordinates)"],
    prefixes = [
        "Test",
        "IT",
        "E2E",
    ],
    scalacopts = [
        "-unchecked",
        "-deprecation",
        "-feature",
        "-Xmax-classfile-name",
        "240",
        "-Xlint:missing-interpolator",
        "-Ywarn-unused-import",
        "-Ywarn-unused",
    ],
    suffixes = [
        "Test",
        "IT",
        "E2E",
    ],
    tags = [
        "E2E",
        "IT",
        "UT",
        "block-network",
    ],
    runtime_deps = [

    ],
    deps = [
        "//koboshi-bootstrap/src/it/java/org/specs2",
        "//koboshi-bootstrap/src/main/java/com/wix/hoopoe/koboshi:agg=cache+cache/persistence+cache/transience+marshaller+registry+remote",
        "//koboshi-bootstrap/src/main/java/com/wix/hoopoe/koboshi/namespace",
        "//koboshi-bootstrap/src/main/java/com/wix/hoopoe/koboshi/report",
        "//koboshi-bootstrap/src/main/java/com/wix/hoopoe/koboshi/scheduler",
        "//koboshi-bootstrap/src/test/java/com/wix/hoopoe/koboshi",
        "//koboshi-bootstrap/src/test/java/com/wix/hoopoe/koboshi/example",
        "//koboshi-bootstrap/src/test/java/com/wix/hoopoe/koboshi/report",
        "//koboshi-bootstrap/src/test/java/com/wix/hoopoe/koboshi/scheduler",
        "//third_party/com/wix/hoopoe/http:http_testkit_2_11",
        "//third_party/ch/qos/logback:logback_classic",
        "//third_party/com/fasterxml/jackson/core:jackson_annotations",
        "//third_party/com/fasterxml/jackson/core:jackson_core",
        "//third_party/com/fasterxml/jackson/core:jackson_databind",
        "//third_party/com/fasterxml/jackson/datatype:jackson_datatype_guava",
        "//third_party/com/fasterxml/jackson/datatype:jackson_datatype_jdk8",
        "//third_party/com/fasterxml/jackson/datatype:jackson_datatype_joda",
        "//third_party/com/fasterxml/jackson/datatype:jackson_datatype_jsr310",
        "//third_party/com/fasterxml/jackson/module:jackson_module_scala_2_11",
        "//third_party/com/github/pathikrit:better_files_2_11",
        "//third_party/com/google/code/findbugs:jsr305",
        "//third_party/com/google/guava",
        "//third_party/com/typesafe:config",
        "//third_party/com/typesafe/akka:akka_actor_2_11",
        "//third_party/com/typesafe/akka:akka_slf4j_2_11",
        "//third_party/com/wixpress/hoopoe:hoopoe_specs2",
        "//third_party/commons-beanutils:commons_beanutils",
        "//third_party/io/spray:spray_client_2_11",
        "//third_party/io/spray:spray_http_2_11",
        "//third_party/javax/servlet:javax_servlet_api",
        "//third_party/joda-time:joda_time",
        "//third_party/junit",
        "//third_party/org/apache/commons:commons_lang3",
        "//third_party/org/apache/httpcomponents:httpclient",
        "//third_party/org/eclipse/jetty:jetty_io",
        "//third_party/org/eclipse/jetty:jetty_server",
        "//third_party/org/eclipse/jetty:jetty_servlet",
        "//third_party/org/eclipse/jetty:jetty_util",
        "//third_party/org/eclipse/jetty:jetty_webapp",
        "//third_party/org/hamcrest:hamcrest_core",
        "//third_party/org/hamcrest:hamcrest_library",
        "//third_party/org/jmock",
        "//third_party/org/jmock:jmock_junit4",
        "//third_party/org/joda:joda_convert",
        "//third_party/org/mockito:mockito_core",
        "//third_party/org/scala-lang:scala_library",
        "//third_party/org/scalaz:scalaz_concurrent_2_11",
        "//third_party/org/scalaz:scalaz_core_2_11",
        "//third_party/org/slf4j:slf4j_api",
        "//third_party/org/specs2:specs2_codata_2_11",
        "//third_party/org/specs2:specs2_common_2_11",
        "//third_party/org/specs2:specs2_core_2_11",
        "//third_party/org/specs2:specs2_junit_2_11",
        "//third_party/org/specs2:specs2_matcher_2_11",
        "//third_party/org/specs2:specs2_mock_2_11",
        "//third_party/org/springframework:spring_web",
    ],
)
